## [âš ï¸ì—”í‹°í‹° ì„¤ê³„ì‹œ ì£¼ì˜ì ]
<hr/>

**1. ì—”í‹°í‹°ì—ëŠ” ê°€ê¸‰ì  setter ë¥¼ ì‚¬ìš©í•˜ì§€ ë§ì**

**2. ëª¨ë“  ì—°ê´€ê´€ê³„ëŠ” ì§€ì—°ë¡œë”©ìœ¼ë¡œ ì„¤ì •í•˜ì**

- ì¦‰ì‹œ ë¡œë”©(EAGER)ì€ ì˜ˆì¸¡ì´ ì–´ë µê³ , ì–´ë–¤ SQLì´ ì‹¤í–‰ë ì§€ ì¶”ì í•˜ê¸° ì–´ë µë‹¤.

  - íŠ¹íˆ `JPQL`ì„ ì‹¤í–‰í•  ë•Œ N+1 ë¬¸ì œê°€ ìì£¼ ë°œìƒí•œë‹¤
    - select o from order o; -> `ì‹¤ì œ SQL ë°œìƒ` select * from Order;
    - ê¸°ëŒ€í•œ ì¿¼ë¦¬ëŠ” Order í…Œì´ë¸”ì—ì„œ ì£¼ë¬¸ë“¤ì„ ê°€ì ¸ì˜¤ëŠ” í•˜ë‚˜ì˜ ì¿¼ë¦¬`(1)`ì˜€ì§€ë§Œ
    - Member ê°€ EAGER ë¡œ ì„¤ì •ë˜ì–´ìˆëŠ” ë°”ëŒì— ê° Order ì˜ Member ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¿¼ë¦¬ë„ ìˆ˜í–‰ë¨`(N)`
    - ë§Œì•½ Order ê°€ 10000ê°œ ì˜€ë‹¤ë©´, Order ë¥¼ ê°€ì ¸ì˜¤ëŠ” í•˜ë‚˜ì˜ ì¿¼ë¦¬ë§Œ ìˆ˜í–‰ë˜ëŠ”ê²Œ ì•„ë‹ˆë¼,

      ê° Order ì˜ Member ë¥¼ ê°€ì ¸ì˜¤ëŠ” 10000ê°œì˜  ì¿¼ë¦¬ê°€ ë˜ ë°œìƒí•˜ëŠ” ê²ƒì´ë‹¤.
- **ê³ ë¡œ, ì‹¤ë¬´ì—ì„œ ëª¨ë“  ì—°ê´€ê´€ê³„ëŠ” ì§€ì—°ë¡œë”©(LAZY)ìœ¼ë¡œ ì„¤ì •í•´ì•¼ í•œë‹¤.**
- í”¼ì¹˜ ëª»í•  ì‚¬ì •ìœ¼ë¡œ ì—°ê´€ëœ ì—”í‹°í‹°ë¥¼ í•¨ê»˜ DB ì—ì„œ ì¡°íšŒí•´ì•¼ í•œë‹¤ë©´, fetch join ë˜ëŠ” ì—”í‹°í‹° ê·¸ë˜í”„ë¥¼ ì‚¬ìš©í•œë‹¤
- @OneToOne, @ManyToOne ê´€ê³„ëŠ” ê¸°ë³¸ì´ ì¦‰ì‹œë¡œë”©ì´ë¯€ë¡œ, ì§ì ‘ ì§€ì—°ë¡œë”©ìœ¼ë¡œ ì„¤ì •í•´ì£¼ì–´ì•¼ í•œë‹¤.
- **ì¦‰ "XToOne" ì‹œë¦¬ì¦ˆë“¤ì€ ê¸°ë³¸ì´ EAGER ì´ë¯€ë¡œ ì¬ì„¤ì •ì´ í•„ìš”!**
- @OneToMany ì˜ ê¸°ë³¸ê°’ì€ ì§€ì—°ë¡œë”©ì´ì§€ë§Œ ëª…ì‹œí•˜ì—¬ ì½”ë”©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤

**3. ì»¬ë ‰ì…˜ì€ í•„ë“œì—ì„œ ì´ˆê¸°í™”í•˜ì**

ì»¬ë ‰ì…˜ì€ í•„ë“œì—ì„œ ì´ˆê¸°í™”í•˜ëŠ” ê²ƒì´ ì•ˆì „í•˜ë‹¤.

- ì¼ë‹¨ null ë¬¸ì œì—ì„œ ì•ˆì „

- í•˜ì´ë²„ë„¤ì´íŠ¸ëŠ” ì—”í‹°í‹°ë¥¼ ì˜ì†í™”í•  ë•Œ, ì»¬ë ‰ì…˜ì„ ê°ì‹¸ì„œ í•˜ì´ë²„ë„¤ì´íŠ¸ê°€ ì œê³µí•˜ëŠ” PersistentBag ì´ë¼ëŠ” ë‚´ì¥ ì»¬ë ‰ì…˜ìœ¼ë¡œ ë³€ê²½í•œë‹¤. 

  - ë§Œì•½ `getOrders()` ì²˜ëŸ¼ ì„ì˜ì˜ ë©”ì„œë“œì—ì„œ ì»¬ë ‰ì…˜ì„ ì˜ëª» ìƒì„±í•˜ë©´ í•˜ì´ë²„ë„¤ì´íŠ¸ê°€ ì›í•˜ëŠ” ë™ì‘ì„ í•´ì¤„ìˆ˜ê°€ ì—†ë‹¤. ë”°ë¼ì„œ í•„ë“œë ˆë²¨ì—ì„œ ìƒì„±í•˜ëŠ” ê²ƒì´ ê°€ì¥ ì•ˆì „í•˜ê³  ì½”ë“œë„ ê°„ê²°!

  - ```java
    Member member = new Member();
    System.out.println(member.getOrders().getClass()); // java.util.ArrayList
    
    em.persist(member); // ì˜ì†í™”!
    System.out.println(member.getOrders().getClass()); // org.hibernate.collection.internal.PersistentBag
    ```

    

## [ì—”í‹°í‹° ì„¤ê³„ì‹œ ğŸ¯íŒ]
<hr>

### @ManyToOne ì´ ì“°ì¸ ê³³ì„ í•œë²ˆì— ì°¾ì•„ LAZY ë¡œ ë°”ê¾¸ê³  ì‹¶ë‹¤ë©´!

>`command + f + shift` ë¡œ @ManyToOne ì´ ì“°ì¸ ëª¨ë“  ê³³ì„ ì°¾ì•„ë‚¼ ìˆ˜ ìˆë‹¤.

![img.png](img.png)

### ì—”í‹°í‹°ë¥¼ ì˜ì†í™”í•˜ê¸° ìœ„í•´, ê° ì—”í‹°í‹° í•˜ë‚˜í•˜ë‚˜ em.persist í•´ì£¼ì–´ì•¼ í•˜ëŠ” ìˆ˜ê³ ë¡œì›€ì„ ëœê³  ì‹¶ë‹¤ë©´!
> cascade = CascadeType.ALL ì˜µì…˜ì„ ì£¼ì

```java
import me.yeonnex.jpashop.domain.Delivery;

import javax.persistence.CascadeType;
import javax.persistence.OneToMany;
import java.util.ArrayList;

public class Order {
  ...
  @OneToMany(mappedBy = "order", cascade = CascadeType.ALL)
  private List<OrderItem> orderItems = new ArrayList<>();

  @OneToOne(fetch = LAZY, cascade = CascadeType.ALL)
  private Delivery delivery;
}
```
ì´ë ‡ê²Œ í•˜ë©´, Order ë§Œ persist í•´ì¤€ë‹¤ë©´ OrderItem ê³¼ Delivery ê°€ ë©ë‹¬ì•„ í•¨ê»˜ persist ë˜ê²Œ í•œë‹¤.

## [íšŒì› ë„ë©”ì¸ ê°œë°œ]
<br/>

êµ¬í˜„ ê¸°ëŠ¥

- íšŒì› ë“±ë¡
- íšŒì› ì¡°íšŒ

ìˆœì„œ

- íšŒì› ì—”í‹°í‹°ì½”ë“œ ë‹¤ì‹œ ë³´ê¸°
- íšŒì› ë¦¬í¬ì§€í† ë¦¬ ê°œë°œ
- íšŒì› ì„œë¹„ìŠ¤ ê°œë°œ
- íšŒì› ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

## [ìƒí’ˆ ë„ë©”ì¸ ê°œë°œ]

êµ¬í˜„ ê¸°ëŠ¥

- ìƒí’ˆ ë“±ë¡
- ìƒí’ˆ ëª©ë¡ ì¡°íšŒ
- ìƒí’ˆ ìˆ˜ì •

ìˆœì„œ

- ìƒí’ˆ ì—”í‹°í‹°ì— ë¡œì§ ë„£ê¸°-> ì‘ì§‘ì„±â¬†ï¸)
  - ì¬ê³  ì¶”ê°€ ë¡œì§
  - ì¬ê³  ê°ì†Œ ë¡œì§
- ìƒí’ˆ ë¦¬í¬ì§€í† ë¦¬ ê°œë°œ
- ìƒí’ˆ ì„œë¹„ìŠ¤ ê°œë°œ
- ìƒí’ˆ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

